---
layout: post
title: DiffClient State Restore
date: 2025-11-11
categories: [Dev]
tags: [Windows,Dev]
---


过去一段时间对Diff进行了一些工作。它的工作原理是基于ida headless自动化比对二进制程序，将结果按照特定文件格式写入保持下来，客户端通过`DiffClient` .NET WPF编写的工具进行可视化查看。

在最开始使用时，它表现良好。随着对结果分析，渐渐地一个需求随之而来--UI的状态保存和恢复（IDA数据库那样打开可以恢复到上次停留的地方）这个想法最开始两年前已经存在于潜意识之中，我想该是完成这个小挑战了。

我会详细介绍我是如何思考这个问题的，如何设计一套目前并不完美的文件协议格式以及我的开发过程和未来的改进工作。

最开始，我只有一个想法就是想要实现这个功能。除此之外，毫无头绪。稍微不恰当的说有点好高骛远，然后将时间周期拉长这些都显得微不足道。你真正想做的事情，神也挡不住。于是我制定了详细的计划，将这个任务拆解为以下几个分步骤：

1. 检索能够符合需求的软件并把它们整理出来
2. 学习它们的设计方式和实现原理（可以阅读文档，开源代码，逆向等等）
3. 开始尝试自己设计，包括仔细分析自己的工具都需要保存什么信息，这决定了你的保存协议是什么方式
4. 编写库代码和单元测试
5. UI工具引入此库进行状态保存和恢复
